<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.72">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="NexClipper Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="NexClipper Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-122075277-7","auto"),ga("set","anonymizeIp",!0),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="search" type="application/opensearchdescription+xml" title="NexClipper" href="/opensearch.xml"><title data-react-helmet="true">Logging | NexClipper</title><meta data-react-helmet="true" property="og:url" content="https://nexclipper.github.io/docs/logging"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Logging | NexClipper"><meta data-react-helmet="true" name="description" content="Logging with NexClipper"><meta data-react-helmet="true" property="og:description" content="Logging with NexClipper"><meta data-react-helmet="true" name="keywords" content="logging,loki,k8s,kubernetes,fluentbit"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://nexclipper.github.io/docs/logging"><link data-react-helmet="true" rel="alternate" href="https://nexclipper.github.io/docs/logging" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://nexclipper.github.io/docs/logging" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.f05b8c39.css">
<link rel="preload" href="/assets/js/styles.b940239e.js" as="script">
<link rel="preload" href="/assets/js/runtime~main.a75c165e.js" as="script">
<link rel="preload" href="/assets/js/main.ce7cbbc7.js" as="script">
<link rel="preload" href="/assets/js/1.39fe5ba9.js" as="script">
<link rel="preload" href="/assets/js/2.4ed13a0e.js" as="script">
<link rel="preload" href="/assets/js/3.da77e9d3.js" as="script">
<link rel="preload" href="/assets/js/1be78505.7c28c9ba.js" as="script">
<link rel="preload" href="/assets/js/152.6534d1c3.js" as="script">
<link rel="preload" href="/assets/js/935f2afb.6fb98f7d.js" as="script">
<link rel="preload" href="/assets/js/17896441.01ca9a43.js" as="script">
<link rel="preload" href="/assets/js/3abe8fb9.366b3ac6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle" type="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/NexClipper_200.svg" alt="NexClipper Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/NexClipper_200.svg" alt="NexClipper Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">NexClipper</strong></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://NexClipper.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Support</a></div><div class="navbar__items navbar__items--right"><a href="https://console.nexclipper.io/login" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Get Started</a><a href="https://github.com/NexClipper/NexClipper" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_GrZ2"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/NexClipper_200.svg" alt="NexClipper Logo" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/NexClipper_200.svg" alt="NexClipper Logo" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><strong class="navbar__title">NexClipper</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://console.nexclipper.io/login" target="_blank" rel="noopener noreferrer" class="menu__link">Get Started</a></li><li class="menu__list-item"><a href="https://github.com/NexClipper/NexClipper" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link" aria-label="GitHub repository"></a></li><li class="menu__list-item"><a href="https://NexClipper.io" target="_blank" rel="noopener noreferrer" class="menu__link">Support</a></li></ul></div></div></div></nav><div class="main-wrapper main-docs-wrapper"><div class="docPage_31aa"><main class="docMainContainer_3ufF"><div class="container padding-vert--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><h2 id="logging-with-nexclipper">Logging with NexClipper</h2><h3 id="loki-on-grafana-dashboard">Loki on Grafana Dashboard</h3><p>Connect to NexClipper Console and go to &#x27;Management&#x27;.</p><p>Click Grafana on Stacks and select the service type you want to expose. If you are on the same network or Local, select NodePort. Or if you need an external environment, select LoadBalancer.</p><div class="admonition admonition-info alert alert--info"><div class="admonition-heading"><h5><span class="admonition-icon"><svg xmlns="http://www.w3.org/2000/svg" width="14" height="16" viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</h5></div><div class="admonition-content"><p>LoadBalancer feature is only available for cloud providers or environments in which support external load balancers.<br>
<a href="https://kubernetes.io/docs/tasks/access-application-cluster/create-external-load-balancer/">Kubernetes Load Balancer</a></p></div></div><p><img alt="grafana_expose" src="/assets/images/nc-grafana-expose-a834bbffc29ea3ca21065a3eac25bc7f.png"></p><p>By default, ID and password is set as <code>admin</code>:<code>admin</code> if there is no password input during initial setup.</p><p>After signing in Grafana, select <code>Explorer</code> tab of Left Menu or connect to <code>http://&lt;grafana-endpoint&gt;:&lt;port&gt;/explorer</code> to view the following page:</p><p><img alt="grafana_explorer" src="/assets/images/nc-grafana-explorer-44ed5c87fad27d9a2701f86a8e806a89.png"></p><h3 id="logql">LogQL</h3><p>LogQL is a Log Query Language and has a separate query scheme.<br>
By default, you can filter logs as you make &#x27;grep&#x27; command in Linux.</p><p>LogQL consists of Log Stream Selector and Filter Expression.</p><h3 id="log-stream-selector">Log Stream Selector</h3><p>Log Stream Selector selects the log stream that should be included in the query as shown below. It consists of one or more key-values, such as the following query expression.</p><pre><code class="language-json">{container=&quot;kube-apiserver&quot;}
</code></pre><p>You can set key and value query expression yourself as above or select menu &#x27;Log Labels&#x27; &gt; &#x27;container&#x27; &gt; &#x27;kube-apiserver&#x27;.</p><p>A operator is also available for labels. It&#x27;s same as the Prometheus label query method.</p><blockquote><p><a href="https://prometheus.io/docs/prometheus/latest/querying/basics/#instant-vector-selectors">https://prometheus.io/docs/prometheus/latest/querying/basics/#instant-vector-selectors</a></p></blockquote><p>The following queries can also be queried:</p><ul><li><p>When querying logs that except &#x27;kube-apiserver&#x27;</p><pre><code class="language-json">{container!=&quot;kube-apiserver&quot;}
</code></pre></li><li><p>When querying logs that include &#x27;kube&#x27;</p><pre><code class="language-json">{container=~&quot;kube.*&quot;}
</code></pre></li><li><p>When querying logs that do not include &#x27;kube&#x27;</p><pre><code class="language-json">{container!~&quot;kube.*&quot;}
</code></pre></li></ul><h3 id="filter-expression">Filter Expression</h3><p>After querying log stream selector, the result of logs can be filtered with a search expression. The search expression can be just text or regex:</p><ul><li><p>Container &#x27;kube-apiserver&#x27; shows results that contain &#x27;error&#x27; but not &#x27;timeout&#x27;.</p><pre><code class="language-json">{container=&quot;kube-apiserver&quot;} |= &quot;error&quot; != &quot;timeout&quot;
</code></pre></li><li><p>To determine the rate of a log at 1-minute intervals:</p><pre><code class="language-json">rate({container=&quot;kube-apiserver&quot;}[1m] |= &quot;error&quot; != &quot;timeout&quot;)
</code></pre></li><li><p>To identify logs starting with &#x27;kube&#x27; at 1-minute intervals, group them with &#x27;container&#x27; and show the top 10 in order.</p></li><li><pre><code class="language-json">topk(10,sum(rate({container=~&quot;kube.*&quot;}[1m] |= &quot;error&quot; != &quot;timeout&quot;)) by (container))
</code></pre></li></ul><p>This was a simple example of setting up and working with Loki and Grafana. If you want to learn more, head over to the <a href="https://grafana.com/docs/loki/latest/">Loki documentation</a>.</p></div></article><div class="margin-vert--xl"><div class="row"><div class="col"><a href="https://github.com/NexClipper/docs/edit/master/docs/logging.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" role="img" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-label="Edit page"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div></div></div><div class="margin-vert--lg"><nav class="pagination-nav" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#logging-with-nexclipper" class="table-of-contents__link">Logging with NexClipper</a><ul><li><a href="#loki-on-grafana-dashboard" class="table-of-contents__link">Loki on Grafana Dashboard</a></li><li><a href="#logql" class="table-of-contents__link">LogQL</a></li><li><a href="#log-stream-selector" class="table-of-contents__link">Log Stream Selector</a></li><li><a href="#filter-expression" class="table-of-contents__link">Filter Expression</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/start">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/">What is NexClipper?</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="http://nexclipper.slack.com/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Slack</a></li><li class="footer__item"><a href="https://twitter.com/nexclipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://www.facebook.com/NexClipper/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Facebook</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/NexClipper/NexClipper" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li><li class="footer__item"><a class="footer__link-item" href="/license">Open Source License</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 NexCloud, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/styles.b940239e.js"></script>
<script src="/assets/js/runtime~main.a75c165e.js"></script>
<script src="/assets/js/main.ce7cbbc7.js"></script>
<script src="/assets/js/1.39fe5ba9.js"></script>
<script src="/assets/js/2.4ed13a0e.js"></script>
<script src="/assets/js/3.da77e9d3.js"></script>
<script src="/assets/js/1be78505.7c28c9ba.js"></script>
<script src="/assets/js/152.6534d1c3.js"></script>
<script src="/assets/js/935f2afb.6fb98f7d.js"></script>
<script src="/assets/js/17896441.01ca9a43.js"></script>
<script src="/assets/js/3abe8fb9.366b3ac6.js"></script>
</body>
</html>